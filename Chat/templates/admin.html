{% extends "base.html" %}
{% block content %}
<h2>–ü–∞–Ω–µ–ª—å –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>

<div class="admin-container">
    <h3>–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
    <ul id="user-list">
        <li>–ó–∞–≥—Ä—É–∑–∫–∞...</li>
    </ul>
</div>

<div class="admin-actions">
    <h3>–î–µ–π—Å—Ç–≤–∏—è</h3>
    <input type="text" id="target-username" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
    <button onclick="banUser()">üî¥ –ë–∞–Ω</button>
    <button onclick="unbanUser()">üü¢ –†–∞–∑–±–∞–Ω</button>
    <!-- –£–±–∏—Ä–∞–µ–º –∫–Ω–æ–ø–∫—É –º—å—é—Ç–∞, –µ—Å–ª–∏ –æ–Ω–∞ –µ—â—ë –æ—Å—Ç–∞–ª–∞—Å—å -->
    <!-- <button onclick="muteUser()">üîá –ú—É—Ç</button> -->
    <button onclick="grantAdmin()">‚≠ê –°–¥–µ–ª–∞—Ç—å –∞–¥–º–∏–Ω–æ–º</button>
    <button onclick="revokeAdmin()">‚ùå –ó–∞–±—Ä–∞—Ç—å –∞–¥–º–∏–Ω–∫—É</button>
</div>

<!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è –≤ —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ -->
<div style="margin-top: 20px;">
    <a href="{{ url_for('chats') }}" class="back-button">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É —á–∞—Ç–æ–≤</a>
</div>

<script type="text/javascript">
    var socket = io();

    // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    socket.on("update_user_list", function(data) {
        var userList = document.getElementById("user-list");
        userList.innerHTML = "";

        data.users.forEach(function(username) {
            var li = document.createElement("li");
            li.textContent = username;
            userList.appendChild(li);
        });
    });

    function getUsername() {
        return document.getElementById("target-username").value.trim();
    }

    function banUser() {
        let username = getUsername();
        if (username) socket.emit("ban_user", { username: username });
    }

    function unbanUser() {
        let username = getUsername();
        if (username) socket.emit("unban_user", { username: username });
    }

    function grantAdmin() {
        let username = getUsername();
        if (username) socket.emit("grant_admin", { username: username });
    }

    function revokeAdmin() {
        let username = getUsername();
        if (username) socket.emit("revoke_admin", { username: username });
    }
</script>
{% endblock %}
